!function(n){var o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=n,s.c=o,s.d=function(n,o,e){s.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:e})},s.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},s.t=function(n,o){if(1&o&&(n=s(n)),8&o)return n;if(4&o&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&o&&"string"!=typeof n)for(var t in n)s.d(e,t,function(o){return n[o]}.bind(null,t));return e},s.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return s.d(o,"a",o),o},s.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},s.p="",s(s.s=100)}({100:function(n,o){function s(){$(".passwords-col").css("max-width","");let n=0,o=0;$(".passwords-row").each((s,e)=>{let t=(e=$(e)).find(".input-group-prepend").width();t>n&&(n=t,o=e.find(".passwords-col").width())}),o>0&&$(".passwords-col").css("max-width",o)}window.mails_passwords={init:function(){let n=window.emails.length,o=$("#passwords-list"),e=1==n?" only-row":"";for(let{id:n,email:s}of window.emails)o.append(`<div data-id="${n}" data-email="${s}" class="row mb-3 justify-content-end passwords-row${e}"><div class="col-md-auto"><div class="input-group-prepend"><span class="input-group-text">${s}</span></div></div>\n            <div class="col passwords-col"><div class="input-group"><input required type="password" class="form-control mail-passwords-main" id="input-${n}" placeholder="Password">\n            <input required type="password" class="form-control" id="confirm-${n}" placeholder="Confirmation">\n            <div class="input-group-append mail-passwords-showHover"><button onclick="mails_passwords.copyBefore(this)" class="btn btn-dark mail-passwords-copyBefore" type="button"><i class="fas fa-copy"></i> Copy from previous</button><button onclick="mails_passwords.copyNext(this)" class="btn btn-secondary mail-passwords-copyNext" type="button"><i class="fas fa-clipboard"></i> Copy to next</button></div></div></div></div>`);1==n?$("#missing-some").html("one"):0==n&&location.reload(),s(),$(window).resize((function(){s()}))},sendForm:function(){let n=[],o=void 0;$(".passwords-row").each((s,e)=>{let t=(e=$(e)).find("input.mail-passwords-main").val();if(e.find("input:not(.mail-passwords-main)").val()!=t)return o=e.attr("data-email"),!1;n.push({id:e.attr("data-id"),password:t})});let s=window.emails.length>1?"s":"";if(null!=o)$.notify({message:"Confirmation for <i>"+o+"</i> is incorrect."},{type:"warning"});else{let o=window.unixcrypt.encrypt;utils.showInfiniteLoading("Encrypting password"+s+"..."),setTimeout(()=>{n=n.map(({id:n,password:s})=>({id:n,password:o(s)})),utils.showInfiniteLoading("Saving password"+s+"..."),$.post("/api/v1/mails/setPasswords",{encrypted:!0,passwords:n}).fail((n,o,e)=>{$.notify({message:"Cannot save password"+s+". See console for details.<br/>If the error keeps repeating, try logout and login again."},{type:"danger"}),console.error("Cannot save (server error):",e)}).done(n=>{n.error?($.notify({message:"Cannot save password"+s+". See console for details.<br/>If the error keeps repeating, try logout and login again."},{type:"danger"}),console.error("Cannot save (application error):",message)):(utils.addNotification("Mail password"+s+" saved.","success"),location.reload())}).always(()=>{utils.hideLoading()})},500)}return!1},copyNext:function(n){let o=$(n).parent().parent().parent().parent(),s=o.find("input.mail-passwords-main").val(),e=o.find("input:not(.mail-passwords-main)").val();o.nextAll().find("input.mail-passwords-main").val(s),o.nextAll().find("input:not(.mail-passwords-main)").val(e)},copyBefore:function(n){let o=$(n).parent().parent().parent().parent(),s=o.prev();console.log(o),console.log(s);let e=s.find("input.mail-passwords-main").val(),t=s.find("input:not(.mail-passwords-main)").val();o.find("input.mail-passwords-main").val(e),o.find("input:not(.mail-passwords-main)").val(t)}}}});