!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="ETRn")}({ETRn:function(e,t){function a(){return $("input, #confirm-button")}function n(){a().removeAttr("disabled").removeClass("disabled"),$(".always-disabled").attr("disabled","disabled").addClass("disabled")}function i(){return $("#input-username").val().trim()}function o(){return $("#input-destination").val().trim()}function s(){return o().toLowerCase()!=values.destination.toLowerCase()}function r(){return i().length>0&&o().trim().length>0}window.mails_managealias={init:function(){let e=$("#input-domain");for(let t of window.domains)e.append(`<option value="${t.id}">${t.name}</option>`);edit&&($("#input-username").val(values.source.split("@")[0]),$("#input-domain").val(values.domain_id)),window.onbeforeunload=()=>{if(!saving&&(!edit&&r()||s()))return"You have unsaved changes on this page. Do you want to leave?"}},confirm:function(){let e=$("#confirm-button");if(edit)s()?$.post("/api/v1/mails/aliases/edit/"+values.id,{destination:o()}).fail((t,a,i)=>{saving=!1,$.notify({message:"Unable to edit this alias. See console for details."},{type:"danger"}),console.warn("Unable to edit alias (server error):",i),n(),utils.enableButton(e,"Edit this alias")}).done(t=>{t.error?(saving=!1,$.notify({message:"Unable to edit this alias. See console for details."},{type:"danger"}),console.warn("Unable to edit alias (application error):",error),n(),utils.enableButton(e,"Edit this alias")):(utils.addNotification("Alias successfully edited.","success"),location.href="/panel/mails/users#aliases")}):$.notify({message:"No change made."},{type:"warning"});else if(r()){saving=!0,a().attr("disabled","disabled").addClass("disabled"),utils.disableButton(e,"Creating the alias...");let t={sourceUser:i(),sourceDomainId:$("#input-domain").val(),destination:o()};$.post("/api/v1/mails/aliases/create",t).fail((t,a,i)=>{saving=!1,$.notify({message:"Unable to create this alias. See console for details."},{type:"danger"}),console.warn("Unable to create alias (server error):",i),n(),utils.enableButton(e,"Create this alias")}).done(t=>{t.error?(saving=!1,$.notify({message:"Unable to create this alias. See console for details."},{type:"danger"}),console.warn("Unable to create alias (application error):",error),n(),utils.enableButton(e,"Create this alias")):(utils.addNotification("Alias successfully added.","success"),location.href="/panel/mails/users#aliases")})}else $.notify({message:"Please fill in all the required inputs."},{type:"warning"});return!1}}}});